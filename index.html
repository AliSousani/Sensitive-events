<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>وقایع حساس</title>
<style>
    body {
        font-family: 'Tahoma', sans-serif;
        background-color: #f0f2f5;
        margin: 0;
        padding: 20px;
        direction: rtl;
        text-align: center;
    }
    h1 {
        color: #333;
    }
    select, input, textarea, button {
        width: 90%;
        padding: 10px;
        margin: 5px 0;
        border: 1px solid #ccc;
        border-radius: 8px;
        font-size: 16px;
    }
    button {
        background-color: #4CAF50;
        color: white;
        cursor: pointer;
        border: none;
    }
    button:hover {
        background-color: #45a049;
    }
    .record {
        background-color: white;
        border: 1px solid #ccc;
        padding: 10px;
        margin-top: 10px;
        border-radius: 8px;
        text-align: right;
    }
</style>
</head>
<body>

<h1>وقایع حساس</h1>

<select id="employeeSelect">
</select>

<select id="yearSelect">
    <option>1404</option>
    <option>1403</option>
</select>

<select id="seasonSelect">
    <option>بهار</option>
    <option>تابستان</option>
    <option>پاییز</option>
    <option>زمستان</option>
</select>

<select id="statusSelect">
    <option>مثبت</option>
    <option>منفی</option>
</select>

<textarea id="descriptionInput" placeholder="شرح اتفاق"></textarea>

<button onclick="saveRecord()">ذخیره</button>

<h2>جستجو</h2>
<select id="filterEmployee">
</select>
<button onclick="filterRecords()">نمایش</button>

<div id="records"></div>

<script>
    const employees = [
        "آزاده احمدی",
        "عادل سهراب زاده",
        "علی قاسمی",
        "سمانه گهرخواه",
        "سمیه حیدری",
        "سید صلاح حسینی",
        "سید محمدهادی مقیمی",
        "سپیده تفرشی",
        "فاطمه بخشنده",
        "محمدرضا شیرازی",
        "محمدولی پوراوند",
        "محمدحسین علیزاده",
        "مهدیه نیری",
        "مهناز رحمانی نژاد"
    ];

    const employeeSelect = document.getElementById("employeeSelect");
    const filterEmployee = document.getElementById("filterEmployee");

    employees.forEach(emp => {
        let option1 = document.createElement("option");
        option1.text = emp;
        employeeSelect.add(option1);

        let option2 = document.createElement("option");
        option2.text = emp;
        filterEmployee.add(option2);
    });

    function saveRecord() {
        const employee = employeeSelect.value;
        const year = document.getElementById("yearSelect").value;
        const season = document.getElementById("seasonSelect").value;
        const status = document.getElementById("statusSelect").value;
        const description = document.getElementById("descriptionInput").value;

        if (!description.trim()) {
            alert("لطفا شرح اتفاق را وارد کنید");
            return;
        }

        let records = JSON.parse(localStorage.getItem("events")) || [];
        records.push({ employee, year, season, status, description });
        localStorage.setItem("events", JSON.stringify(records));
        document.getElementById("descriptionInput").value = "";
        alert("ذخیره شد");
    }

    function filterRecords() {
        const selectedEmployee = filterEmployee.value;
        let records = JSON.parse(localStorage.getItem("events")) || [];
        let filtered = records.filter(r => r.employee === selectedEmployee);
        displayRecords(filtered);
    }

    function displayRecords(records) {
        const recordsDiv = document.getElementById("records");
        recordsDiv.innerHTML = "";
        records.forEach(r => {
            const div = document.createElement("div");
            div.className = "record";
            div.innerHTML = `<strong>${r.employee}</strong> | ${r.year} - ${r.season} - ${r.status} <br> ${r.description}`;
            recordsDiv.appendChild(div);
        });
    }
</script>

</body>
</html>
